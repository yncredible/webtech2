<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BUILDING APPS</title>
    <link href='http://fonts.googleapis.com/css?family=Roboto+Condensed:400,300,700' rel='stylesheet' type='text/css'>    <style>
        body{margin:0;padding:0;font-family: 'Roboto Condensed', sans-serif;}
        p{margin:0; padding:0;}
        #today, #week{text-align: center;}
        #today .temp{font-size:200px;font-weight: 300; color:#38455A;}
        #dotw{list-style-type:none; margin:10px 0 0 0; padding:0;}
        #dotw li{width:33.33%;display:block;float:left;text-align:center;}
        ul p{padding:2.5%;}
        .nday1{background:#F37A4D;}
        .nday2{background:#F2E392;}
        .nday3{background:#87B4DD;}

    </style>
</head>
    <body>
    <div id="wrapper">
        <div id="today">
            <p><span class="day"></span></p>
            <p><span class="temp"></span></p>
            <p><span class="summ"></span></p>
            <p><span class="tempMin"></span><span class="tempMax"></span></p>
        </div>
        <div id="week">
            <p class="summ"></p>
            <ul id="dotw">
                <li>
                    <div class="nday1">
                        <p><span class="day"></span></p>
                        <p><span class="tempMin"></span><span class="tempMax"></span></p>
                    </div>
                </li>
                <li>
                    <div class="nday2">
                        <p><span class="day"></span></p>
                        <p><span class="tempMin"></span><span class="tempMax"></span></p>
                    </div>
                </li>
                <li>
                    <div class="nday3">
                        <p><span class="day"></span></p>
                        <p><span class="tempMin"></span><span class="tempMax"></span></p>
                    </div>
                </li>
            </ul>
        </div>
    </div>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

        <script>
        
        navigator.geolocation.getCurrentPosition(success, error);

        function success(position)
        {

            var apiKey = 'b580f6e8e74d610083d96671f3aaedcd';
            var url = 'https://api.forecast.io/forecast/';
            var lati = position.coords.latitude;
            var longi = position.coords.longitude;
            var data;

            $.getJSON(url + apiKey + "/" + lati + "," + longi + "?callback=?&units=si", function(data) {

            console.log(data);
            
            var dayArray = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
            var nday1 = data.daily.data[1];
            var nday2 = data.daily.data[2];
            var nday3 = data.daily.data[3];

            $('#today .day').text(dayArray[new Date(data.currently.time*1000).getDay()]);
            $('#today .temp').text(Math.round(data.currently.temperature) + "°");
            $('#today .summ').text(data.currently.summary);
            $('#today .tempMin').text(Math.round(data.daily.data[1].temperatureMin) + "° - ");
            $('#today .tempMax').text(Math.round(data.daily.data[1].temperatureMax) + "°");

            $('#week .summ').text(data.daily.summary);

            $('.nday1 .day').text(dayArray[new Date(nday1.time*1000).getDay()]);
            $('.nday1 .tempMin').text(Math.round(nday1.temperatureMin) + "° - ");
            $('.nday1 .tempMax').text(Math.round(nday1.temperatureMax) + "°");

            $('.nday2 .day').text(dayArray[new Date(nday2.time*1000).getDay()]);
            $('.nday2 .tempMin').text(Math.round(nday2.temperatureMin) + "° - ");
            $('.nday2 .tempMax').text(Math.round(nday2.temperatureMax) + "°");

            $('.nday3 .day').text(dayArray[new Date(nday3.time*1000).getDay()]);
            $('.nday3 .tempMin').text(Math.round(nday3.temperatureMin) + "° - ");
            $('.nday3 .tempMax').text(Math.round(nday3.temperatureMax) + "°");

            });
        }

        function error(err) 
        {
          console.warn('ERROR(' + err.code + '): ' + err.message);
          $("#warning").text("Het was ongemogelijk uw geolocatie te bepalen");
        };


        </script>


    </body>
</html>